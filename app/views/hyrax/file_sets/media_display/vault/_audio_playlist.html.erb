<audio id="audio1" data-able-player data-skin="2020" preload="auto" width="600">
</audio>
<ul class="able-playlist" data-player="audio1" data-embedded>
  <% audio_files.each do |file| %>
    <li>
      <span class="able-source" data-type="audio/mpeg" data-src="<%= hyrax.download_path(file) %>"></span>
      <button><%= file.title.first %></button>
    </li>
  <% end %>
</ul>
<% if Hyrax.config.display_media_download_link? && allow_downloads?(audio_files.first) %>
    <%= link_to "Download selected audio",
                hyrax.download_path(audio_files.first),
                data: { label: audio_files.first.id },
                target: :_blank,
                id: "file_download" %>
  <%# Include link to transcript %>
  <% if parent.member_presenters.any? { |fs| fs.pdf? } %>
    <% transcript = parent.member_presenters.find { |fs| fs.pdf? } %>
    &ensp;|&ensp;
    <%= link_to "Download transcript (PDF)",
                hyrax.download_path(transcript),
                data: { turbolinks: false },
                target: :_blank,
                id: "transcript_file_download",
                data: { label: transcript.id } %>
  <% end %>
<% end %>
<script>
  // Change "Download selected audio" link when changing files
  $(document).on('turbolinks:load', function() {
      $('.col-sm-12.col-md-10').click(function(e) {
        e.stopPropagation();
        var selectedAudio = $('li.able-current').find('.able-source').data('src');
        $('#file_download').attr('href', selectedAudio);
      });
  });
</script>