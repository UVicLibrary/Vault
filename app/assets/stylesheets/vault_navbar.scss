// New for Hyrax 4 and Bootstrap 4

search {
  display: flex;
  flex: 1 1;
}

.vault_nav {
  //Background color is dynamically set in views/vault_navbar
  // via appearance.header_background_color
  padding: 0;

  .row {
    flex: 1 0 100%;
  }

  // Overrides hyrax/_facets.scss
  .navbar-toggler .navbar-toggler-icon {
    display: inline-block;
  }

  .navbar-toggler {
    margin: 1rem;
  }

  // This element can't have display:flex or it screws up
  // the collapse/expand animation
  #top-navbar-collapse {
    font-size: 1.2rem;
    justify-content: space-between;
    line-height: 2;
    width: auto;
    flex-grow: 0;

    *:not(.dropdown-item, .dropdown-menu *) {
      color: #fff;
    }

    #user_utility_links {
      align-items: baseline;

      // Do not mess with the height of internal elements or it will
      // make the collapse/expand animation choppy!

      .active > .nav-link {
        box-shadow: inset 0 0 99999px rgba(0, 0, 0, 0.5);
      }

      .nav-item {
        display: flex;
        flex: 1 1;
        width: 100%;

        &:hover, &:focus {
          box-shadow: inset 0 0 99999px rgba(0, 0, 0, 0.5);
          text-decoration: underline;
        }

        .nav-link {
          display: block;
          padding: 0.5rem 1rem;
          align-content: center;
          width: 100%;
        }
      }
    }

  }

  #vault_logo {
    font-size: 1.4rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    align-content: center;
    margin-right: auto; // Stick to the left no matter the screen size
    margin-left: 2rem;

    span {
      width: fit-content;
    }

    .institution_name {
      display: none;
    }

    #wordmark {
      height: 18px;
      margin-top: -4px;
    }

  }

  #expand-search-button {
    box-shadow: inset 0 0 99999px rgba(0, 0, 0, 0.5);
    fill: white;
    border: 0;
    border-radius: 0;
    color: #fff;

    &:hover, &:focus {
      // Same background colour as search bar
      box-shadow: inset 0 0 99999px rgba(0, 0, 0, 0.5);
      border-color: #fff !important;
    }

  }

  #expand-search-button.dropdown-toggle.collapsed {
    box-shadow: none;

    &::after {
      transform: rotate(180deg);
    }
  }

}

// For invisible help/label text meant for screen readers
// See https://www.a11yproject.com/posts/how-to-hide-content/
// This class is applied to #expand-search-button
.visually-hidden {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

// Search bar
.expanded-search-container {

  .btn-primary {
    background-color: #337ab7;
    border-color: #337ab7;
  }

  // Make the search bar background a bit darker to
  // contrast the main navbar
  box-shadow: inset 0 0 99999px rgba(0, 0, 0, 0.5);

  #search-top-navbar-collapse.show,
  #search-top-navbar-collapse.collapsing {
    padding: 15px;
    display: flex;
    flex: 1 1 100%;
    justify-content: center;
    flex-wrap: wrap;
    align-content: space-between;
    gap: 1rem;
    width: 100%;
  }

  .adv-search {
    display: flex;
    color: white;
    align-items: center;
    margin-right: 2rem;
  }

  // Search form
  .input-group {
    height: 37.5px;
    flex-wrap: nowrap;

    // Autocomplete for collection titles
    .twitter-typeahead,
    #search-field-header {
      height: 100%;
    }

    .typeahead, .tt-query, .tt-hint,
    .twitter-typeahead .tt-suggestion {
      font-size: 18px;
      border-radius: 0;
    }

  }

  #search-form-header {
    width: 100%;
    display: inline-block;
  }

  // "Go" button for search
  #search-submit-header {
    border-radius: 0;
    border-top-right-radius: 0.25rem;
    border-bottom-right-radius: 0.25rem;
  }

}

#user_utility_links {
  align-items: baseline;
}